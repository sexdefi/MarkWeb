# prd

好的！以下是针对 "MarkFlow" 在线 Markdown 笔记工具的完整产品需求说明书（PRD），内容全面但不过于冗余，适合直接提供给 Cursor 作为开发依据。文档涵盖产品概述、功能需求、非功能需求、验收标准等，确保 Cursor 能根据此生成符合预期的代码。

---

# 产品需求说明书 - MarkFlow 在线 Markdown 笔记工具

## 1. 产品概述
### 1.1 产品名称
MarkFlow

### 1.2 产品定位
MarkFlow 是一款轻量、高效的在线 Markdown 笔记工具，专注于实时编辑、预览和管理，适合学生、程序员和内容创作者记录笔记、文档或技术总结。

### 1.3 目标用户
- 学生：用于课堂笔记和复习资料整理。
- 程序员：记录代码片段和技术文档。
- 内容创作者：撰写文章草稿并导出分享。

### 1.4 核心价值
- 简单易用的 Markdown 编辑体验。
- 实时预览与高效笔记管理。
- 支持扩展功能和云同步。

### 1.5 开发工具
- 前端：React + TypeScript。
- AI 辅助：Cursor。

---

## 2. 功能需求
### 2.1 Markdown 编辑器
- **描述**: 用户可以输入 Markdown 文本并实时预览渲染结果。
- **需求**:
  1. 支持标准 Markdown 语法（标题、加粗、斜体、列表、链接等）。
  2. 左右分栏布局：左侧为 `<textarea>` 输入区，右侧为 HTML 预览区。
  3. 支持快捷键：Ctrl+B（加粗）、Ctrl+I（斜体）。
- **输入**: Markdown 文本。
- **输出**: 实时渲染的 HTML 内容。

### 2.2 文件管理
- **描述**: 用户可以创建文件夹并管理笔记。
- **需求**:
  1. 支持文件夹创建与删除。
  2. 树状结构展示笔记列表。
  3. 支持按标题搜索笔记。
- **输入**: 文件夹名称、笔记标题。
- **输出**: 文件树视图、搜索结果列表。

### 2.3 扩展支持
- **描述**: 增强 Markdown 的功能，支持代码和图表。
- **需求**:
  1. 支持代码块高亮（支持 JavaScript、Python 等语言）。
  2. 支持 Mermaid 图表（流程图、时序图等）。
- **输入**: 代码块（如 ```js）、Mermaid 语法。
- **输出**: 高亮显示的代码、渲染的图表。

### 2.4 导出功能
- **描述**: 用户可以将笔记导出为不同格式。
- **需求**:
  1. 导出为 PDF 文件。
  2. 导出为 Markdown 文件（.md）。
- **输入**: 当前笔记内容。
- **输出**: 可下载的 PDF 或 .md 文件。

### 2.5 云同步
- **描述**: 用户可以登录并同步笔记到云端。
- **需求**:
  1. 用户登录（邮箱/密码）。
  2. 笔记实时同步到云端。
  3. 支持离线模式（本地缓存）。
- **输入**: 用户凭据、笔记内容。
- **输出**: 同步成功的笔记、离线可用状态。

---

## 3. 非功能需求
### 3.1 性能
- 渲染 500 行 Markdown 文本时，延迟 < 100ms。
- 文件管理支持 100 个笔记无明显卡顿。

### 3.2 兼容性
- 支持主流浏览器：Chrome、Firefox。
- 响应式设计，适配桌面和移动端。

### 3.3 安全性
- 用户数据通过 HTTPS 传输。
- 密码使用哈希存储。

### 3.4 可用性
- 界面简洁，用户 5 分钟内可上手。
- 提供深色和浅色主题切换。

---

## 4. 技术实现建议
### 4.1 前端
- **框架**: React（组件化开发）。
- **语言**: TypeScript（类型安全）。
- **Markdown 解析**: Markdown-it（支持插件）。
- **代码高亮**: Prism.js。
- **图表渲染**: Mermaid.js。

### 4.2 后端
- **服务**: Firebase（用户认证、实时数据库）。

### 4.3 导出
- **PDF**: jsPDF。
- **Markdown**: 原生文件下载。

### 4.4 本地缓存
- **存储**: IndexedDB。

---

## 5. 验收标准
### 5.1 Markdown 编辑器
- 输入 `# Title` 显示一级标题。
- 按 Ctrl+B 将选中文本变为 `**text**`，预览加粗。
- 输入后 100ms 内预览更新。

### 5.2 文件管理
- 创建文件夹 “Notes”，添加 3 个笔记，树状结构正确显示。
- 搜索 “test”，返回包含 “test” 的笔记。

### 5.3 扩展支持
- 输入 ```js console.log("hi") ```，代码高亮显示。
- 输入 Mermaid 语法 `graph TD; A-->B;`，渲染流程图。

### 5.4 导出功能
- 点击 “导出 PDF”，生成包含当前内容的 PDF 文件。
- 点击 “导出 Markdown”，下载正确的 .md 文件。

### 5.5 云同步
- 登录后创建笔记，刷新页面后仍可见。
- 断网后仍可编辑，联网后自动同步。

---

## 6. 开发优先级与阶段
| 功能模块       | 优先级 | 开发阶段 |
|----------------|--------|----------|
| Markdown 编辑器 | 高     | 1        |
| 文件管理       | 高     | 2        |
| 扩展支持       | 中     | 3        |
| 导出功能       | 中     | 4        |
| 云同步         | 中     | 5        |

---

## 7. 约束与假设
### 7.1 约束
- 初期不支持多人协作，仅限单用户。
- 不提供复杂插件市场，聚焦核心功能。

### 7.2 假设
- 用户熟悉基本 Markdown 语法。
- 网络环境通常稳定，离线模式为辅助功能。

---

## 8. 使用说明（给 Cursor）
- 本文档为开发 "MarkFlow" 的完整需求。
- 请根据功能需求和优先级生成代码，首先生成阶段 1 的 Markdown 编辑器。
- 使用 React + TypeScript，确保代码符合验收标准。

---

### 下一步行动
1. 打开 Cursor，将此 PRD 复制到聊天栏（Ctrl+L）。
2. 输入提示词：
   ```
   根据 PRD，使用 React 和 TypeScript 创建一个 Markdown 编辑器组件，包含左右分栏布局，左侧输入 Markdown，右侧实时预览，使用 markdown-it 解析。
   ```
3. 检查生成的代码，运行测试。

如果需要调整 PRD 或直接生成代码，请告诉我！这版 PRD 已足够完整，可以直接驱动 Cursor 开发。准备好了吗？